# Задача: реорганизовать проект по модулям

## Контекст

Вся логика бота сосредоточена в `main.py` (~800 строк). Внутри файла уже выделены логические блоки: конфигурация окружения, слой данных, вспомогательные функции, UI-компоненты Discord и набор slash-команд. Монолитная структура затрудняет поддержку и развитие проекта.

## Цель

Разделить код на отдельные модули, соответствующие логическим областям ответственности, без изменения внешнего поведения бота.

## Предлагаемая структура

- `config.py` — загрузка переменных окружения, глобальные константы.
- `db.py` — инициализация БД и CRUD-операции для рейдов, ролей и записей.
- `models.py` — дата-классы и типы, описывающие доменные сущности.
- `utils.py` — бизнес-логика: парсинг ролей, проверка прав, сборка сообщений.
- `views.py` — Discord UI-компоненты (`SignupView`, `RoleSelect`, `LeaveButton`) и функции, которые работают напрямую с взаимодействиями.
- `commands.py` — slash-команды и регистрация группы `raid`.
- `app.py`/`main.py` — точка входа, настройка бота и привязка команд.
- `tests/` — перенос `_selftest` в автоматические тесты.

## Критерии готовности

- Каждый модуль содержит только свою область ответственности.
- Поведение бота и интерфейс команд сохраняются.
- README и документация обновлены с учётом новой структуры.
- Добавлены/обновлены автоматические тесты для ключевых функций.

## Дополнительно

- Проверить повторное использование утилит без зависимостей от Discord API.
- Настроить импорт так, чтобы избежать циклических зависимостей.
